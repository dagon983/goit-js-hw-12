{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default  async function fetchPictares(findPic, page = 1, per_page = 15) {\n    const baseUrl = \"https://pixabay.com\";\n    const endPoint = \"/api/\";\n    const params = new URLSearchParams ({\n        key: \"44272946-14b75e2a0f7d5637eb83394ff\",\n        q: findPic,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page: page, \n        per_page: per_page\n    });\n    const url = `${baseUrl}${endPoint}?${params}`;\n\n    try{\n        const response = await axios.get(url)\n        return response.data; \n    } catch {\n        throw new Error (`HTTP error! status: ${response.status}`)\n    }\n}\n\n","function imageTamplate(img) {\n    return `<li class=\"gallery-item\">\n            <a class=\"img-link\" href=\"${img.largeImageURL}\">\n            <img class=\"gallery-item-image\"\n                src=\"${img.webformatURL}\"\n                alt=\"${img.tags}\"\n                width=\"360px\"\n                height=\"200px\"\n            />\n            <div class=\"info\">\n                <p class=\"info-title\">likes <spam class=\"info-value\">${img.likes}</spam> </p>\n                <p class=\"info-title\">views <spam class=\"info-value\">${img.views}</spam></p>\n                <p class=\"info-title\">comments <spam class=\"info-value\">${img.comments}</spam></p>\n                <p class=\"info-title\">downloads <spam class=\"info-value\">${img.downloads}</spam></p>\n            </div>\n            </a>\n            </li>`\n}\n\nexport default function renderImages(arr) {\n    return arr.map(imageTamplate).join(\"\");\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport fetchPictares from \"./js/pixabay-api\";\nimport renderImages from \"./js/render-functions\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet newLightBox =  new SimpleLightbox('gallery, a',{\n    captionsData: 'alt',\n    captionDelay: 250\n});\n\nconst form = document.querySelector(\".form\");\nconst imageList = document.querySelector(\".gallery\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\n\nlet page = 1;\nlet inputValue = '';\n\n\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n     inputValue = event.currentTarget.elements.inputText.value.trim(); \n\n    if (inputValue === \"\") {\n        iziToast.error({\n            title: 'Error',\n            message: \"Need to fill the out the search bar\",\n            position: \"topRight\",\n        });\n        return;\n    }\n\n    showLoader();\n\n    try{\n        const data = await fetchPictares(inputValue, page);\n        const totalHits = data.totalHits;\n        hideLoader()\n        \n        if (totalHits === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topRight\",\n            });\n            imageList.innerHTML = \"\";\n            return;\n        }\n\n        const markUp = renderImages(data.hits);\n        imageList.innerHTML = markUp;\n        newLightBox.refresh();\n\n        if(totalHits > 15) {\n            loadMoreBtn.style.display = \"block\";\n        }\n    \n    } catch {\n        iziToast.warning({\n            title: \"Error\",\n            message: `Something went wrong. ${response.message}`\n        })\n    }\n});\n\nloadMoreBtn.addEventListener(\"click\", async (event) => {\n    page += 1;\n    try {\n        const data = await fetchPictares(inputValue, page);\n        const markUp = renderImages(data.hits);\n        imageList.insertAdjacentHTML(\"beforeend\", markUp);\n        newLightBox.refresh();\n\n        const item = document.querySelector(\".gallery-item\");\n        const itemHeight = item.getBoundingClientRect().height;\n        \n        window.scrollBy({\n            top: itemHeight * 2,\n            left: 0,\n            behavior: \"smooth\",\n          });\n\n        const totalHits = data.totalHits; \n\n        if(totalHits <= page * 15) {\n        loadMoreBtn.style.display = \"none\";\n        iziToast.info({\n            title: 'End of results',\n            message: \"We're sorry, but you've reached the end of search results.\",\n        });\n       }\n\n        \n       \n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: `Something went wrong ${error.message}.`\n        })\n    }\n}) \n\n\nfunction showLoader() {\n    const loader = document.querySelector('.loader');\n    imageList.innerHTML = '';\n    loader.style.display = \"block\";\n};\n\nfunction hideLoader() {\n    const loader = document.querySelector('.loader');\n    loader.style.display = \"none\";\n};\n"],"names":["fetchPictares","findPic","page","per_page","baseUrl","endPoint","params","url","axios","imageTamplate","img","renderImages","arr","newLightBox","SimpleLightbox","form","imageList","loadMoreBtn","inputValue","event","iziToast","showLoader","data","totalHits","hideLoader","markUp","itemHeight","error","loader"],"mappings":"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"}